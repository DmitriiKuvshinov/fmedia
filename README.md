# Тестовое задание
## Что было сделано
Развернута ВМ, используя Vagrant и VirtualBox. Написаны роли и плейбуки для Ansible, которые поэтапно поднимают необходимые контейнеры и подготавливают окружение
Задание выполнено на:
- VirtualBox 6.1.16
- ansible 2.9.10
- vagrant 2.2.14

## Как проверить
Внести в hosts файл записи:
```
127.0.0.1 blog.example.com
127.0.0.1 grafana.example.com
```
В директории с проектом выполнить:

```
vagrant up
```
Дождаться окончания процесса. Будет создана ВМ, а также установлен необходимый софт, для функционирования сервера
Добавить в конец строки с описанием хоста следующее: ansible_python_interpreter=/usr/bin/python3
Или выполнить: sed -i 's/$/ ansible_python_interpreter=\/usr\/bin\/python3/' inventory
```
ansible-playbook provisioning/playbook.yml --tags "deployapp"
```

Ansible подготовит и развернет wordpress, состоящий из приложения на php-fpm-7.4, mysql-5.7 и nginx-alpine
Ресурс будет доступен по [адресу](http://blog.example.com:2285)

Для запуски мониторинга необходимо выполнить
```
ansible-playbook provisioning/playbook.yml --tags "deploymonitoring"
```
Ansible подготовит и развернет grafana + prometheus + дополнительные экспортеры, а также сконфигурирует grafana
Ресурс будет доступен по [адресу](http://grafana.example.com:2285)
Логин: admin
Пароль: admin
Настроены алерты внутри графаны, которые высылаются в телеграм
Посмотреть можно в [чатике](https://t.me/joinchat/Gtp2XIU1K9oiD4R_)

## Ответы на вопросы
1) traceroute - продвинутая версия утилиты ping. С каждым отправляемым пакетом уеличивается TTL, пока пакет не достигнет цели. Таким образом, у нас есть муршрут пакета и время, за которое пакет добирается до точек маршрутизации
2) OpenVZ - контейнеризация, основанная на виртуализации операционной системы. KVM - аппаратная виртуализация (ядро гостевой ОС без правок). XEN - паравиртуализация (ядро системы значительно изменяется, для запуска в системе).
3) Изначально был "голый" MySQL. После модернизаций появились системы хранения файлов, поверх штатного MySQL, такие как InnoDB и MyISAM. MyISAM - устаревшая, медленная. InnoDB - быстрая, надежная. Механизм InnoDB, например, используется в percona. 
4) PostgreSQL, Mysql (к ней относится семейство решений percona), mongodb, sqlite
5) swap - раздел на диске (логический диск или файл), куда могут выгружаться страницы памяти (чаще неиспользуемые). также используется для хранения состояния оперативной памяти на время сна или гибернации